<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Neural Wings - Web Demo</title>

    <!-- 1. 引用 Vue 构建出来的 CSS -->
    <link rel="stylesheet" href="ui/dist/assets/style.css">

    <style>
        body {
            font-family: 'Press Start 2P', arial, sans-serif;
            /* 匹配你的字体 */
            margin: 0;
            padding: 0;
            background-color: #000;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Raylib 游戏层 */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            /* 底层 */
            border: 0 none;
            background-color: black;
            width: 100% !important;
            height: 100% !important;
        }

        /* Vue UI 层 */
        #app {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            /* 顶层 */

            /* 关键：允许点击穿透到 Canvas */
            pointer-events: none;
        }

        /* 强制 Vue 中的所有交互元素恢复点击 */
        /* 你需要在 Vue 的按钮或链接上使用这些类名 */
        #app button,
        #app a,
        #app input,
        #app .interactive {
            pointer-events: auto;
        }

        /* 隐藏加载中的默认提示 */
        #status {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            z-index: 100;
            font-size: 10px;
        }
    </style>
</head>

<body>

    <div id="game-container">
        <!-- 状态提示 -->
        <div id="status">正在下载游戏数据...</div>

        <!-- 游戏 Canvas -->
        <canvas id="canvas" oncontextmenu="event.preventDefault()" tabindex="-1"></canvas>

        <!-- Vue 挂载点 -->
        <div id="app"></div>
    </div>

    <script type='text/javascript'>
        var statusElement = document.getElementById('status');

        var Module = {
            preRun: [],
            postRun: [],
            print: (function () {
                return function (text) { console.log(text); };
            })(),
            canvas: (function () {
                var canvas = document.getElementById('canvas');
                return canvas;
            })(),
            setStatus: function (text) {
                if (!text) statusElement.style.display = 'none';
                statusElement.innerHTML = text;
            },
            totalDependencies: 0,
            monitorRunDependencies: function (left) {
                this.totalDependencies = Math.max(this.totalDependencies, left);
                Module.setStatus(left ? '正在加载资源: ' + (this.totalDependencies - left) + '/' + this.totalDependencies : '');
            }
        };
    </script>

    <!-- 2. 加载 Emscripten 生成的胶水代码 -->
    {{{ SCRIPT }}}

    <!-- 3. 加载 Vue 构建出来的 JS (作为模块加载) -->
    <script type="module" src="ui/dist/assets/app.js"></script>

</body>

</html>